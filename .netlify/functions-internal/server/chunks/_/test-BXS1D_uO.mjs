import { jsx, jsxs } from 'react/jsx-runtime';
import { useState, useEffect } from 'react';
import { C as CourtneyCarousel } from './CourtneyCarousel-B8amUYAv.mjs';
import 'clsx';
import 'tailwind-merge';
import 'embla-carousel-react';
import 'lucide-react';
import '@radix-ui/react-slot';
import 'class-variance-authority';
import '@google/generative-ai';

function GoogleSheetManager() {
  const [sheetData, setSheetData] = useState(null);
  const [list, setList] = useState([]);
  const [error, setError] = useState(null);
  const [generatedImageUrl, setGeneratedImageUrl] = useState(null);
  const API_KEY = "AIzaSyBekd6TDj3J72J0_ZJp3Q6zOL9y6VldVeE";
  const SHEET_ID = "1178ZGuxYc0ORAGS_NkJVlnGUV7E_j-mB5j02KA3i1O0";
  const RANGE = "Sheet1!A1:B10";
  useEffect(() => {
  }, []);
  const fetchSheetData = async () => {
    try {
      const response = await fetch(
        `https://sheets.googleapis.com/v4/spreadsheets/${SHEET_ID}/values/${RANGE}?key=${API_KEY}`
      );
      if (!response.ok) {
        throw new Error("Failed to fetch sheet data");
      }
      const data = await response.json();
      setSheetData(data);
      const values = data.values;
      const formattedList = values.map((row, index) => ({
        id: index,
        text: row[0],
        imagePrompt: row.length > 1 ? row[1] : null
      }));
      setList(formattedList);
    } catch (err) {
      setError(err instanceof Error ? err.message : "An error occurred");
      console.error("Error fetching sheet data:", err);
    }
  };
  useEffect(() => {
    fetchSheetData();
    return () => {
      if (generatedImageUrl) {
        URL.revokeObjectURL(generatedImageUrl);
      }
    };
  }, [generatedImageUrl]);
  if (error) {
    return /* @__PURE__ */ jsxs("div", { className: "text-red-500", children: [
      "Error: ",
      error
    ] });
  }
  return /* @__PURE__ */ jsxs("div", { children: [
    error && /* @__PURE__ */ jsxs("div", { className: "text-red-500", children: [
      "Error: ",
      error
    ] }),
    generatedImageUrl && /* @__PURE__ */ jsx("div", { className: "mb-4", children: /* @__PURE__ */ jsx(
      "img",
      {
        src: generatedImageUrl,
        alt: "Generated by Gemini",
        className: "max-w-full h-auto rounded-lg shadow-lg"
      }
    ) }),
    list.length > 0 ? /* @__PURE__ */ jsx(CourtneyCarousel, { list }) : /* @__PURE__ */ jsx("p", { children: "Loading..." })
  ] });
}
function Test() {
  return /* @__PURE__ */ jsx("div", { className: "p-2 flex justify-center pt-6", children: /* @__PURE__ */ jsx(GoogleSheetManager, {}) });
}

export { Test as component };
//# sourceMappingURL=test-BXS1D_uO.mjs.map
